<div class="service-detail-container" *ngIf="service && !isLoading; else loading">
  <!-- Header / Hero Section -->
  <div class="service-hero">
    <div class="hero-left" *ngIf="service.logoUrl">
      <img class="provider-logo"
           [src]="service.logoUrl"
           [alt]="service.businessName + ' Logo'" />
    </div>

    <div class="hero-info">
      <h1>
        {{ service.businessName }}
        <span *ngIf="service.isVerified" class="verified-badge">
          <mat-icon>verified</mat-icon> Verified
        </span>
      </h1>
      <p class="category">{{ service.category }}</p>
    </div>
  </div>

  <!-- Service Description -->
  <div class="service-body">
    <div class="service-info-card">
      <h2>{{ service.title }}</h2>
      <p class="description">{{ service.description }}</p>

      <div class="service-meta" *ngIf="service.businessLocation">
        <p><mat-icon>location_on</mat-icon> {{ service.businessLocation }}</p>
      </div>

      <button class="book-btn" (click)="openBookingDialog()">
        <mat-icon>calendar_today</mat-icon> Book Now
      </button>
    </div>

    <app-service-image-upload *ngIf="service?.businessId"
                              [businessId]="service.businessId">
    </app-service-image-upload>

    <!-- Gallery -->
    <div class="gallery" *ngIf="service.images?.length">
      <div class="gallery-grid">
        <img *ngFor="let img of service.images"
             [src]="img"
             alt="Service image" />
      </div>
    </div>

    <!-- Reviews Section -->
    <div class="reviews-section">
      <h3>Customer Reviews</h3>

      <div *ngIf="reviews.length > 0; else noReviews">
        <div class="review-card" *ngFor="let review of reviews">
          <div class="review-header">
            <strong>{{ review.reviewer }}</strong>
            <span class="rating">
              <mat-icon *ngFor="let star of [].constructor(review.rating)">star</mat-icon>
            </span>
          </div>
          <p class="comment">{{ review.comment }}</p>
        </div>
      </div>

      <ng-template #noReviews>
        <p class="no-reviews">No reviews yet for this service.</p>
      </ng-template>
    </div>
  </div>
</div>

<ng-template #loading>
  <div class="loading-container">
    <mat-spinner></mat-spinner>
    <p>Loading service details...</p>
  </div>
</ng-template>
