<div class="service-detail-container" *ngIf="provider && !isLoading; else loading">
  <!-- HEADER SECTION -->
  <div class="service-hero">
    <div class="hero-info">
      <h1 class="business-name">
        {{ provider.businessName }}
        <span *ngIf="provider.isVerified" class="verified-badge">
          <mat-icon class="verified-icon">verified</mat-icon>
          Verified
        </span>
      </h1>
      <p class="category">{{ provider.category }}</p>
    </div>
  </div>

  <!-- MAIN CONTENT -->
  <div class="service-body">
    <!-- SERVICE DETAILS -->
    <div class="service-info-card">
      <h2>{{ provider.title }}</h2>
      <p class="description">{{ provider.description }}</p>

      <div class="service-meta">
        <p *ngIf="provider.businessLocation">
          <mat-icon>location_on</mat-icon>
          {{ provider.businessLocation }}
        </p>
      </div>

      <button class="book-btn" (click)="openBookingDialog(provider.id)">
        <mat-icon>calendar_today</mat-icon>
        Book Now
      </button>
    </div>

    <!-- GALLERY SECTION -->
    <div class="gallery" *ngIf="provider.imageUrl && provider.imageUrl.length > 0">
      <div class="gallery-grid">
        <img *ngFor="let image of provider.imageUrl"
             [src]="image.startsWith('/uploads')
            ? environment.uploadsUrl + image
            : image"
             alt="Service image"/>
      </div>
    </div>
  </div>

  <!-- REVIEWS SECTION -->
  <div class="reviews-section">
    <h3>Customer Reviews</h3>

    <div *ngIf="reviews.length > 0; else noReviews">
      <div class="review-card" *ngFor="let review of reviews">
        <div class="review-header">
          <strong>{{ review.customerName }}</strong>
          <span class="rating">
            <mat-icon *ngFor="let i of [].constructor(review.rating)">star</mat-icon>
          </span>
        </div>
        <p class="comment">{{ review.comment }}</p>
      </div>
    </div>

    <ng-template #noReviews>
      <p class="no-reviews">No reviews yet for this provider.</p>
    </ng-template>
  </div>
</div>

<!-- LOADING STATE -->
<ng-template #loading>
  <div class="loading-container">
    <mat-spinner></mat-spinner>
    <p>Loading service details...</p>
  </div>
</ng-template>
