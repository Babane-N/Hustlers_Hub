<div class="promo-container">
  <h2>Community Promotions</h2>
  <p class="subtitle">Discover events, deals, and local happenings</p>

  <!-- üß© Create Promotion Button -->
  <div class="create-promo-btn-container">
    <button class="btn create-promo-btn" (click)="goToAdCreator()">
      + Create Promotion
    </button>
  </div>

  <!-- üîç Search, Filter, Sort Controls -->
  <div class="search-sort-filter">
    <input type="text"
           [(ngModel)]="searchTerm"
           placeholder="Search title or description..." />

    <select [(ngModel)]="filterCategory">
      <option value="">All Categories</option>
      <option *ngFor="let cat of uniqueCategories" [value]="cat">
        {{ cat }}
      </option>
    </select>

    <select [(ngModel)]="sortBy">
      <option value="expiresAt">Sort by Expiry</option>
      <option value="title">Sort by Title</option>
      <option value="postedBy">Sort by Poster</option>
    </select>
  </div>

  <!-- üì¢ Promotions List -->
  <div class="promo-list">
    <div class="promo-card" *ngFor="let promo of filteredPromotions">

      <!-- üñºÔ∏è Promo Images -->
      <div class="promo-images" *ngIf="promo?.images && promo.images.length > 0; else noImage">
        <img *ngFor="let img of promo.images"
             [src]="img"
             alt="{{ promo.title }}"
             class="promo-img" />
      </div>

      <!-- üîÅ Fallback for No Image -->
      <ng-template #noImage>
        <img src="assets/default.png" alt="No image available" class="promo-img" />
      </ng-template>

      <!-- üìù Promo Info -->
      <h3>{{ promo.title }}</h3>
      <p>{{ promo.description }}</p>
      <div class="promo-meta">
        <span>üë§ {{ promo.postedBy }}</span>
        <span>‚è≥ {{ promo.expiresAt | date: 'mediumDate' }}</span>
        <span>üìÇ {{ promo.category }}</span>
      </div>
    </div>
  </div>
</div>

