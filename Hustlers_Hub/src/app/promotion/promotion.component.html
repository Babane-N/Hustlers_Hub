<div class="promo-container">
  <h2>Community Promotions</h2>
  <p class="subtitle">Discover events, deals, and local happenings</p>

  <!-- üß© Create Promotion Button -->
  <div class="create-promo-btn-container">
    <button class="btn create-promo-btn" (click)="goToAdCreator()">
      + Create Promotion
    </button>
  </div>

  <!-- üîç Search, Filter, Sort Controls -->
  <div class="search-sort-filter">
    <input type="text"
           [(ngModel)]="searchTerm"
           placeholder="Search title or description..." />

    <select [(ngModel)]="filterCategory">
      <option value="">All Categories</option>
      <option *ngFor="let cat of uniqueCategories" [value]="cat">
        {{ cat }}
      </option>
    </select>

    <select [(ngModel)]="sortBy">
      <option value="expiresAt">Sort by Expiry</option>
      <option value="title">Sort by Title</option>
      <option value="postedBy">Sort by Poster</option>
    </select>
  </div>

  <!-- üì¢ Promotions Grid -->
  <div class="promo-list">
    <div class="promo-card" *ngFor="let promo of filteredPromotions">

      <!-- üñºÔ∏è Promo Images Carousel -->
      <div class="promo-images" *ngIf="promo.images && promo.images.length > 0;">
        <ng-container *ngFor="let img of promo.images">
          <img *ngIf="promo.images.length > 0"
               [src]="promo.images[0]"
               alt="{{ promo.title }} Image"
               class="promotion-pic" />


        </ng-container>
      </div>

      <!-- üîÅ Fallback for No Image -->
      <div *ngFor="let promo of filteredPromotions" class="promotion-card">
        <div class="promotion-image" *ngIf="promo.images.length > 0">
          <img [src]="promo.images[0]" alt="{{ promo.title }} Image" class="promotion-pic" />
        </div>>

        <!-- üìù Promo Info -->
        <div class="promo-info">
          <h3>{{ promo.title }}</h3>
          <p>{{ promo.description }}</p>
          <div class="promo-meta">
            <span>üë§ {{ promo.postedBy }}</span>
            <span>‚è≥ {{ promo.expiresAt | date: 'mediumDate' }}</span>
            <span>üìÇ {{ promo.category }}</span>
          </div>
        </div>

      </div>
  </div>
</div>
